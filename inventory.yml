---
# This file manages our servers and their variables.
# For each server, we declare the server-dependent variables that are required for the roles.
# 1. oatrade group:
#    - oaprod
#    - oatest
#    - godalko
# 3. eHanse group:
#    - ehprod
#    - ehtest
#    - jupyter


oatrade:
  hosts:
    twprod:
      # Ansible cirtical variables
      pipelining: False              # TODO kann auf TRUE gesetzt werden wenn Ubuntu 16+04 oder neuer installiert
      ansible_host: "{{ _vault_twprod_ip }}"
      ansible_port: "{{ host_port }}"
      #play_0_bootstrap critical variables
      userlist:
      - "{{ ehanse_users }}"
      - "{{ rfhk_users }}"
      # play_1_essentials critical variables
      fqdn: "oaprod.oa-trade.com"
      hostname: "oaprod"
      timezone: "Asia/Hong_Kong"
      #play_2_apache critical variables
      domain: "oa.oa-trade.com"
      domainAliases: "erp.oa-trade.com"
      certbot_admin_email: info@ehanse.de
      certbot_certs:
       - domains:
          - oa.oa-trade.com
      certbot_create_standalone_stop_services:
        - apache2
      #play_3_odoo critical variables (also uses domain info from above)
      odoo_version: 8.0
      odoo_config_addons_path:
      - "/home/{{ odoo_user }}/odoo/server/addons"
      - "/home/{{ odoo_user }}/odoo/custom/OAW-custom"
      - "/home/{{ odoo_user }}/odoo/custom/awo-custom"
      odoo_config_smtp_password: "{{ _vault_oatrade_odoo_config_smtp_password }}"
      odoo_config_smtp_port: 587
      odoo_config_smtp_server: s1.hostedmail.cc
      odoo_config_smtp_ssl: True
      odoo_config_smtp_user: erp@oawatches.net


    chrono123:
      #Ansible critical variables
      ansible_host: "{{ _vault_chrono123_ip }}"
      ansible_port: "{{ host_port }}"
      #play_0_bootstrap critical variables
      userlist:
      - "{{ ehanse_users }}"
      - "{{ rfhk_users }}"
      #play_1_essentials critical variables
      fqdn: "godalko.com"
      hostname: "godalko.com"
      timezone: "Asia/Hong_Kong"
      #play_2_apache critical variables
      domain: "go.godalko.com"   #für Odoo VHost
      domainAliases: "godalko.com www.godalko.com"
      certbot_admin_email: info@godalko.com
      certbot_certs:
       - domains:
          - chrono123.com
          - go.godalko.com
          - godalko.com
          - www.godalko.com
          - www.chrono123.com
          - backend.chrono123.com
      certbot_create_standalone_stop_services:
        - apache2
      odoo_version: 8.0
      odoo_config_addons_path:
      - "/home/{{ odoo_user }}/odoo/server/addons"
      - "/home/{{ odoo_user }}/odoo/custom/OAW-custom"
      - "/home/{{ odoo_user }}/odoo/custom/awo-custom"
      odoo_config_smtp_password: somepassword                       #TODO
      odoo_config_smtp_port: 587
      odoo_config_smtp_server: somesmtpserver.com                   #TODO
      odoo_config_smtp_ssl: True                                    #TODO
      odoo_config_smtp_user: erp@oawatches.net                      #TODO

    twtest:
      ansible_host: "{{ _vault_twtest_ip }}"
      ansible_port: "{{ host_port }}"
      fqdn: "test.oa-trade.com"
      hostname: "oatest"
      timezone: "Asia/Hong_Kong"
      domain: "oatest.oa-trade.com"
      certbot_admin_email: info@godalko.com
      certbot_certs:
       - domains:
          - oatest.oa-trade.com
      certbot_create_standalone_stop_services:
        - apache2
      userlist:
      - "{{ ehanse_users }}"
      - "{{ rfhk_users }}"
      odoo_version: 8.0
      odoo_config_addons_path:
      - "/home/{{ odoo_user }}/odoo/server/addons"
      - "/home/{{ odoo_user }}/odoo/custom/OAW-custom"
      - "/home/{{ odoo_user }}/odoo/custom/awo-custom"
      odoo_config_smtp_password: somepassword                       #TODO
      odoo_config_smtp_port: 587
      odoo_config_smtp_server: somesmtpserver.com                   #TODO
      odoo_config_smtp_ssl: True                                    #TODO
      odoo_config_smtp_user: erp@oawatches.net                      #TODO

      #play_6_ssmtp critical variables
      host_ssmtp_root: "{{ _vault_ssmtp_AuthUser }}"
      host_ssmtp_mailhub: "{{ _vault_ssmtp_mailhub }}"
      host_ssmtp_hostname: "{{ domain }}"
      host_ssmtp_AuthUser: "{{ _vault_ssmtp_AuthUser }}"
      host_ssmtp_AuthPass: "{{ _vault_ssmtp_AuthPass }}"

      # play_7_fail2ban critical services
      fail2ban_services:
      - name: sshd
        port: "{{ host_port }}"
      - name: apache-auth
        port: http, https
      - name: apache-overflows
        port: http, https
      - name: apache-badbots
        port: http, https


ehanse:
  hosts:
    ehprod:
      ansible_host: "{{ _vault_ehprod_ip }}"
      ansible_port: "{{ host_port }}"
      fqdn: "www.ehanse.de"
      hostname: "ehanse.de"
      timezone: "Europe/Berlin"
      domain: "erp.ehanse.de"  #für Odoo
      domainAliases: "www.ehanse.de"
      certbot_admin_email: info@ehanse.de
      certbot_certs:
       - domains:
          - wiki.ehanse.de
          - seafile.ehanse.de
          - www.ehanse.de
          - erp.ehanse.de
      certbot_create_standalone_stop_services:
        - apache2
      userlist:
      - "{{ ehanse_users }}"
      odoo_version: 8.0
      odoo_config_addons_path:
      - "/home/{{ odoo_user }}/odoo/server/addons"
      - "/home/{{ odoo_user }}/odoo/custom/OAW-custom"
      - "/home/{{ odoo_user }}/odoo/custom/awo-custom"
      odoo_config_smtp_password: somepassword                       #TODO
      odoo_config_smtp_port: 587
      odoo_config_smtp_server: somesmtpserver.com                   #TODO
      odoo_config_smtp_ssl: True                                    #TODO
      odoo_config_smtp_user: erp@oawatches.net                      #TODO


    ehtest:
      # Ansible critical variables
      pipelining: true
      ansible_host: "{{ _vault_ehtest_ip }}"
      ansible_port: "{{ host_port }}"
      timezone: "Europe/Berlin"
      # play_2_apache critical variables
      domain: "erptest.ehanse.de" #für Odoo
      domainAliases: "wwwtest.ehanse.de"
      fqdn: "erptest.ehanse.de"
      hostname: "erptest.ehanse.de"
      certbot_admin_email: info@ehanse.de
      certbot_certs:
       - domains:
          - erptest.ehanse.de
          - wwwtest.ehanse.de
      certbot_create_standalone_stop_services:
        - apache2
      userlist:
      - "{{ ehanse_users }}"

      #play_3_odoo critical variables
      odoo_version: 8.0
      odoo_config_addons_path:
      - "/home/{{ odoo_user }}/odoo/server/addons"
      - "/home/{{ odoo_user }}/odoo/custom/OAW-custom"
      - "/home/{{ odoo_user }}/odoo/custom/awo-custom"
      odoo_config_smtp_password: somepassword                       #TODO
      odoo_config_smtp_port: 587
      odoo_config_smtp_server: somesmtpserver.com                   #TODO
      odoo_config_smtp_ssl: True                                    #TODO
      odoo_config_smtp_user: erp@oawatches.net                      #TODO

      #play_6_ssmtp critical variables
      host_ssmtp_root: "{{ _vault_ssmtp_AuthUser }}"
      host_ssmtp_mailhub: "{{ _vault_ssmtp_mailhub }}"
      host_ssmtp_hostname: "{{ domain }}"
      host_ssmtp_AuthUser: "{{ _vault_ssmtp_AuthUser }}"
      host_ssmtp_AuthPass: "{{ _vault_ssmtp_AuthPass }}"


      # play_7_fail2ban critical services
      fail2ban_services:
      - name: sshd
        port: "{{ host_port }}"
      #- name: apache-auth
      #  port: http, https
      #- name: apache-overflows
      #  port: http, https
      #- name: apache-badbots
      #  port: http, https





    any_localhost:
      ansible_host: 127.0.0.1
      connection: local
      












